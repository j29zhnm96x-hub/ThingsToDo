:root {
  /* Priority colors */
  --pUrgent: #ff0000; /* Urgent */
  --p0: #ef4444; /* Highest (red) */
  --p1: #f97316; /* High (orange) */
  --p2: #eab308; /* Medium (yellow) */
  --p3: #22c55e; /* Low (green) */

  /* Dark Mode - Rich Deep Ocean Theme */
  --bg: #0a0f1a;
  --bg-gradient: linear-gradient(135deg, #0a0f1a 0%, #0d1526 50%, #111d2e 100%);
  --surface: #101828;
  --surface2: #152033;
  --surface3: #1a2840;
  --text: #f1f5f9;
  --muted: #94a3b8;
  --border: #1e3a5f;
  --danger: #ef4444;
  --ok: #22c55e;
  --accent: #06b6d4; /* Cyan accent */
  --accent2: #8b5cf6; /* Purple secondary */
  --glow: rgba(6, 182, 212, 0.3);

  /* Bar colors */
  --topbar-bg: linear-gradient(180deg, #0d1526 0%, #101828 100%);
  --tabbar-bg: linear-gradient(0deg, #080d16 0%, #0d1526 100%);
  --modal-bg: linear-gradient(145deg, #121c2d 0%, #0f172a 100%);

.notesList {
  margin-top: 16px;
}

.notesList__header {
  font-size: 0.8125rem;
  font-weight: 600;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 12px;
  padding: 0 4px;
}

.inlineNote {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: 12px;
  margin-bottom: 12px;
  padding: 16px;
  border-radius: var(--radius);
  border: 1px solid var(--border);
  background: var(--surface);
  position: relative;
}

.inlineNote__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: -20px;
}

.inlineNote__label {
  font-size: 0.8125rem;
  font-weight: 600;
  color: var(--muted);
  text-transform: none;
  margin-top: -10px;
}

.inlineNote__body {
  display: flex;
  gap: 8px;
  align-items: flex-start;
}

.inlineNote__input {
  flex: 1;
}

.inlineNoteWrapper {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 12px;
}

.inlineNote__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.inlineNote__label {
  font-size: 0.8125rem;
  font-weight: 600;
  color: var(--muted);
  margin-top: -10px;
}

.inlineNote {
  position: relative;
}

.inlineNote__clear {
  position: absolute;
  top: -3px;
  right: 6px;
  width: 18px;
  height: 28px;
  padding: 0;
  border: none;
  background: transparent;
  color: var(--muted);
  font-size: 24px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
}

.inlineNote__menu {
  align-self: center;
  padding: 0;
  min-width: 44px;
  min-height: 44px;
  font-size: 22px;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transform: translateY(-6px);
  background: none !important;
  border: none !important;
  color: var(--muted);
  vertical-align: middle;
}

.inlineNote__input {
  flex: 1;
  min-height: 40px;
  resize: none;
  border: none;
  background: transparent;
  color: var(--text);
  font-size: 16px;
  line-height: 1.4;
  outline: none;
  padding: 0;
  overflow: hidden;
}

.inlineNote__menu {
  align-self: center;
  padding: 0;
  min-width: 44px;
  min-height: 44px;
  font-size: 22px;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transform: translateY(-6px);
  background: none !important;
  border: none !important;
  color: var(--muted);
  vertical-align: middle;
}

  /* Surfaces used by inputs/todos so themes can swap them. */
  --field: #0d1526;
  --field-focus: #152033;

  /* Card effects */
  --card-shadow: 0 4px 20px rgba(0, 0, 0, 0.4), 0 0 40px rgba(6, 182, 212, 0.05);
  --card-hover-shadow: 0 8px 30px rgba(0, 0, 0, 0.5), 0 0 50px rgba(6, 182, 212, 0.1);

  --radius: 16px;
  --tap: 44px;

  /* iOS safe areas */
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --safe-left: env(safe-area-inset-left, 0px);
  --safe-right: env(safe-area-inset-right, 0px);
}

/* Light mode - Fresh Sunrise Theme */
html[data-theme='light'] {
  --bg: #f8fafc;
  --bg-gradient: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 50%, #e8f0fe 100%);
  --surface: #ffffff;
  --surface2: #f8fafc;
  --surface3: #f1f5f9;
  --text: #1e293b;
  --muted: #64748b;
  --border: #e2e8f0;
  --accent: #6366f1; /* Indigo accent */
  --accent2: #ec4899; /* Pink secondary */
  --glow: rgba(99, 102, 241, 0.2);

  /* Bar colors - soft gradient */
  --topbar-bg: linear-gradient(180deg, #ffffff 0%, #f8fafc 100%);
  --tabbar-bg: linear-gradient(0deg, #f1f5f9 0%, #ffffff 100%);
  --modal-bg: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);

  --field: #ffffff;
  --field-focus: #f8fafc;

  /* Card effects */
  --card-shadow: 0 4px 15px rgba(99, 102, 241, 0.08), 0 1px 3px rgba(0, 0, 0, 0.05);
  --card-hover-shadow: 0 8px 25px rgba(99, 102, 241, 0.12), 0 4px 6px rgba(0, 0, 0, 0.05);
}



* {
  box-sizing: border-box;
  touch-action: manipulation;
}
html, body {
  height: 100%;
  overflow: hidden; /* Prevent body scroll */
}
body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  background: var(--bg);
  background-image: var(--bg-gradient);
  color: var(--text);
  overscroll-behavior-y: none;

  /* iOS UX tweaks (requested): avoid blue tap highlight, text callout, selection */
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
  touch-action: manipulation;
}

/* Allow text selection where it matters */
input, textarea, select {
  -webkit-user-select: text;
  user-select: text;
}
button { -webkit-tap-highlight-color: transparent; }

.skip-link {
  position: absolute;
  left: 12px;
  top: 12px;
  padding: 10px 12px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 10px;
  color: var(--text);
  transform: translateY(-200%);
}
.skip-link:focus { transform: translateY(0); outline: 2px solid #93c5fd; }

.app {
  height: 100%;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  padding-left: var(--safe-left);
  padding-right: var(--safe-right);
}

.topbar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 5;
  height: calc(44px + var(--safe-top));
  padding: var(--safe-top) 14px 0;
  background: var(--topbar-bg);
  border-bottom: 1px solid var(--border);
  box-shadow: 0 2px 20px rgba(0, 0, 0, 0.15);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  box-sizing: border-box;
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}

html[data-theme='light'] .topbar {
  box-shadow: 0 2px 15px rgba(99, 102, 241, 0.08);
}

.topbar__title {
  font-weight: 700;
  letter-spacing: 0.3px;
  font-size: 18px;
  background: linear-gradient(135deg, var(--text) 0%, var(--accent) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.topbar__actions {
  min-width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: flex-end;
}

.topbar__addBtn {
  width: 34px;
  height: 34px;
  border-radius: 10px;
  background: linear-gradient(135deg, var(--accent) 0%, var(--accent2) 100%);
  color: white;
  font-size: 20px;
  font-weight: 600;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  cursor: pointer;
  transition: transform 150ms ease, box-shadow 150ms ease;
  box-shadow: 0 2px 10px var(--glow);
}

html[data-theme='light'] .topbar__addBtn {
  color: white;
  box-shadow: 0 2px 12px rgba(99, 102, 241, 0.3);
}

html[data-theme='dark'] .topbar__addBtn {
  color: white;
}

.topbar__addBtn:active {
  transform: scale(0.92);
}

.main {
  padding: 14px;
  padding-top: calc(14px + 44px + var(--safe-top));
  padding-bottom: calc(14px + var(--safe-bottom) + 24px); /* keep content above tabbar */
}

.main:focus {
  outline: none;
}

.card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 14px;
  box-shadow: var(--card-shadow);
}

.row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.row--split > * {
  flex: 1;
  min-width: 0;
}

.stack { display: grid; gap: 10px; }

.btn {
  min-height: var(--tap);
  padding: 10px 16px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--surface2);
  color: var(--text);
  font-weight: 600;
  font-size: 18px;
  cursor: pointer;
  transition: all 180ms ease;
}
.btn:active { transform: translateY(1px); }
.btn:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }

.btn--primary { 
  background: linear-gradient(135deg, var(--accent) 0%, var(--accent2) 100%);
  border-color: transparent; 
  color: white;
  box-shadow: 0 2px 10px var(--glow);
}
.btn--primary:active { box-shadow: 0 1px 5px var(--glow); }

.btn--danger { 
  background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
  border-color: transparent; 
  color: white;
  box-shadow: 0 2px 10px rgba(239, 68, 68, 0.3);
}

.btn--ghost { background: transparent; border-color: var(--border); }

.input, .select, .textarea {
  width: 100%;
  min-width: 0;
  padding: 10px 14px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--field);
  color: var(--text);
  font-size: 16px;
  transition: all 200ms ease;
  appearance: none;
  -webkit-appearance: none;
  margin: 0;
}

.input, .select {
  height: var(--tap);
}

.select {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%2394a3b8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 10px center;
  background-size: 16px;
  padding-right: 32px;
}

.select--small {
  height: 36px;
  font-size: 14px;
  padding: 4px 32px 4px 10px;
}

.input--small {
  height: 36px;
  font-size: 14px;
  padding: 4px 10px;
}

/* Recurrence UI */
.recurrence-details {
  margin-top: 8px;
  padding: 12px;
  background: var(--surface2);
  border-radius: var(--radius);
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.recurrence-weekly-days {
  display: grid;
  grid-template-columns: repeat(7, minmax(34px, 1fr));
  gap: 8px;
  align-items: center;
  width: 100%;
}

.recurrence-day-btn {
  width: 100%;
  aspect-ratio: 1 / 1;
  max-width: 48px;
  justify-self: center;
  border-radius: 50%;
  border: 2px solid var(--border);
  background: var(--surface);
  color: var(--text);
  font-size: clamp(12px, 2.8vw, 16px);
  font-weight: 600;
  cursor: pointer;
  transition: transform 150ms ease, background 150ms ease;
  -webkit-tap-highlight-color: transparent;
  padding: 0;
  margin: 0;
  outline: none;
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
}

.recurrence-day-btn:active {
  transform: scale(0.96);
}

.recurrence-day-btn:hover {
  border-color: var(--accent);
}

.recurrence-day-btn--active {
  background: var(--accent);
  border-color: var(--accent);
  color: white;
}

.recurrence-monthly-options {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.recurrence-end {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.recurrence-end .select--small,
.recurrence-end .input--small {
  flex-shrink: 0;
}

/* Recurring icon styling */
.icon-recurring {
  opacity: 0.85;
  /* 20% larger than surrounding text */
  font-size: 1.2em;
  line-height: 1;
  vertical-align: middle;
  margin-left: 6px;
  cursor: default;
  background: none !important;
  border: none !important;
  padding: 0 !important;
  display: inline-block;
  /* Prefer app font for glyphs so platform emoji styling isn't used */
  font-family: inherit;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.textarea { min-height: 96px; resize: vertical; }
.input:focus-visible, .select:focus-visible, .textarea:focus-visible {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 3px var(--glow);
  background: var(--field-focus);
}

.label { display: flex; flex-direction: column; gap: 6px; font-weight: 600; font-size: 15px; color: var(--muted); min-width: 0; }

.list {
  display: grid;
  gap: 12px;
}

.todo {
  display: grid;
  gap: 0;
  padding: 0px 10px;
  border-radius: var(--radius);
  border: 1px solid var(--border);
  background: var(--surface);
  width: 100%;
  box-sizing: border-box;
  overflow: hidden;
  transition: all 200ms ease;
  box-shadow: var(--card-shadow);
}

.todo:active {
  background: var(--surface2);
  transform: scale(0.99);
}

/* Project cards - same size/style as todo cards but lighter */
.projectCard {
  display: grid;
  gap: 0;
  padding: 2px 12px;
  border-radius: var(--radius);
  border: 1px solid var(--border);
  background: var(--surface);
  width: 100%;
  box-sizing: border-box;
  overflow: hidden;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  transition: all 200ms ease;
  box-shadow: var(--card-shadow);
}

.projectCard:active:not(.todo--dragging) {
  background: var(--surface2);
  transform: scale(0.99);
}

.projectCard[data-type='default'] {
  border-left: 4px solid #fbbf24;
  background: linear-gradient(135deg, rgba(251, 191, 36, 0.08) 0%, rgba(59, 130, 246, 0.08) 100%);
}

.projectCard[data-type='checklist'] {
  border-left: 4px solid #a855f7;
  background: linear-gradient(135deg, rgba(168, 85, 247, 0.08) 0%, rgba(34, 197, 94, 0.08) 100%);
}

/* Light mode specific overrides for better contrast/feel */
html[data-theme='light'] .projectCard,
html[data-theme='light'] .todo,
html[data-theme='light'] .card {
  box-shadow: var(--card-shadow);
}

html[data-theme='light'] .projectCard[data-type='default'] {
  background: linear-gradient(135deg, #fffbeb 0%, #eff6ff 100%);
  border-left: 4px solid #f59e0b;
}

html[data-theme='light'] .projectCard[data-type='checklist'] {
  background: linear-gradient(135deg, #faf5ff 0%, #f0fdf4 100%);
  border-left: 4px solid #a855f7;
}

.projectCard__row {
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 0;
}

.projectCard__info {
  display: flex;
  align-items: center;
  gap: 10px;
  flex: 1;
  min-width: 0;
}

.projectCard__name {
  font-weight: 600;
  font-size: 15px;
  line-height: 1.2;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.projectCard__count {
  font-size: 13px;
  color: var(--muted);
  white-space: nowrap;
  flex-shrink: 0;
}

.projectCard__progressText {
  margin-left: auto;
  font-size: 12px;
  font-weight: 700;
  letter-spacing: 0.2px;
  color: var(--muted);
}

.projectCard__icons {
  display: flex;
  align-items: center;
  gap: 2px;
}

.projectCard__menuBtn {
  padding: 0;
  min-width: 24px;
  min-height: 24px;
  font-size: 22px;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transform: translateY(-1px);
  background: none !important;
  border: none !important;
  color: var(--muted);
  vertical-align: middle;
}

/* Checklist view */
.checklist {
  display: grid;
  gap: 8px;
  touch-action: manipulation;
}

.checklist__item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  border-radius: var(--radius);
  border: 1px solid var(--border);
  background: var(--surface);
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  transition: all 200ms ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

html[data-theme='light'] .checklist__item {
  box-shadow: 0 2px 8px rgba(99, 102, 241, 0.06);
}

.checklist__item--done {
  opacity: 0.6;
  background: var(--surface2);
}

.checklist__circle {
  width: 22px;
  height: 22px;
  border-radius: 999px;
  border: 2px solid var(--accent);
  background: transparent;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  color: var(--muted);
  transition: all 200ms ease;
  flex-shrink: 0;
}

.checklist__circle--done {
  border-color: var(--ok);
  background: var(--ok);
  color: white;
}

.checklist__text {
  flex: 1;
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-size: 15px;
}

.checklist__hint {
  color: var(--muted);
  font-size: 14px;
  text-align: center;
  padding: 6px 0;
  touch-action: manipulation;
}

/* Checklist Pills (page tabs) */
.checklist-pills {
  display: flex;
  gap: 8px;
  padding: 8px 0 12px;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  touch-action: pan-x;
}

.checklist-pills::-webkit-scrollbar {
  display: none;
}

.checklist-pill {
  flex-shrink: 0;
  padding: 6px 14px;
  border-radius: 16px;
  border: 1.5px solid var(--border);
  background: transparent;
  color: var(--text);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 200ms ease;
  -webkit-tap-highlight-color: transparent;
  touch-action: pan-x;
}

.pill {
  cursor: grab;
  user-select: none;
}

.pill--dragging {
  cursor: grabbing;
}

.pill-placeholder {
  display: inline-block;
  border-radius: 16px;
  background: rgba(99, 102, 241, 0.12);
  transition: all 0.2s ease;
  vertical-align: middle;
  pointer-events: none;
  flex-shrink: 0;
}

.pill-ghost {
  box-shadow: 0 14px 32px rgba(15, 23, 42, 0.25);
  transform: scale(1.02);
  border-radius: 16px;
  opacity: 0.95;
  pointer-events: none;
}

.checklist-pill--active {
  background: var(--accent);
  border-color: var(--accent);
  color: white;
}

html[data-theme='light'] .checklist-pill--active {
  background: #6366f1;
  border-color: #6366f1;
}

/* Add Page Button (floating) */
.checklist-addPage-btn {
  position: fixed;
  bottom: calc(55px + 74px);
  right: 16px;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  border: none;
  background: var(--accent);
  color: white;
  font-size: 24px;
  font-weight: 300;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 4px 16px rgba(99, 102, 241, 0.4);
  transition: transform 200ms ease, box-shadow 200ms ease;
  -webkit-tap-highlight-color: transparent;
  z-index: 100;
}

.checklist-addPage-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 20px rgba(99, 102, 241, 0.5);
}

.checklist-addPage-btn:active {
  transform: scale(0.95);
}

html[data-theme='light'] .checklist-addPage-btn {
  background: #6366f1;
  box-shadow: 0 4px 16px rgba(99, 102, 241, 0.3);
}

/* Clear Page Button (floating, above add page) */
.checklist-clearPage-btn {
  position: fixed;
  bottom: calc(55px + 74px + 64px);
  right: 16px;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  border: none;
  background: #ff6b6b; /* Light red */
  color: white;
  font-size: 10px;
  font-weight: 500;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 4px 16px rgba(255, 107, 107, 0.4);
  transition: transform 200ms ease, box-shadow 200ms ease;
  -webkit-tap-highlight-color: transparent;
  z-index: 100;
  line-height: 1.1;
}

.checklist-clearPage-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 20px rgba(255, 107, 107, 0.5);
}

.checklist-clearPage-btn:active {
  transform: scale(0.95);
}

html[data-theme='light'] .checklist-clearPage-btn {
  background: #ff6b6b;
  box-shadow: 0 4px 16px rgba(255, 107, 107, 0.3);
}

/* Checklist Container */
.checklist-container {
  position: relative;
}

/* Checklist Active Container */
.checklist__active {
  display: grid;
  gap: 8px;
}

/* Back button in topbar */
.topbar__backBtn {
  min-width: 36px;
  min-height: 36px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 10px;
  border: none;
  background: transparent;
  color: var(--text);
  font-size: 22px;
  font-weight: 400;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
}

@keyframes todoFadeOut {
  0% { opacity: 1; transform: translateY(0); }
  100% { opacity: 0; transform: translateY(-8px); }
}

@keyframes todoFadeIn {
  0% { opacity: 0; transform: translateY(8px); }
  100% { opacity: 1; transform: translateY(0); }
}

@keyframes todoCollapse {
  0% { max-height: 160px; padding-top: 4px; padding-bottom: 4px; margin-top: 0; margin-bottom: 0; }
  100% { max-height: 0; padding-top: 0; padding-bottom: 0; margin-top: 0; margin-bottom: 0; border-width: 0; }
}

.todo--fadeOut {
  animation: todoFadeOut 1200ms ease forwards, todoCollapse 1200ms ease forwards;
}

.todo--newCompleted {
  animation: todoFadeIn 1200ms ease;
}

.todo--flipMove {
  transition: transform 1500ms ease-in-out;
  will-change: transform;
}

.todo--animating {
  pointer-events: none;
}

.todo--slot {
  border-color: transparent;
  background: transparent;
  padding: 0;
}

.todo__title {
  font-weight: 600;
  line-height: 1.2;
  font-size: 15px;
  display: block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.todo__dueInline {
  white-space: nowrap;
  margin-right: 2px;
}

.todo__noteIcon {
  width: 24px;
  height: 24px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  line-height: 1;
  transform: translateY(-1px);
}

.todo__row1 {
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 0;
}

.todo__icons {
  display: flex;
  align-items: center;
  gap: 2px;
}

.todo__titleArea {
  flex: 1;
  min-width: 0;
  overflow: hidden;
}

.todo__row2 {
  display: flex;
  align-items: center;
  gap: 2px;
  color: var(--muted);
  font-size: 13px;
  min-height: 16px;
  padding-left: 28px;
}

.todo__checkWrap {
  position: relative;
  display: inline-grid;
  place-items: center;
  width: 22px;
  height: 22px;
  cursor: pointer;
}

.todo__check {
  -webkit-appearance: none;
  appearance: none;
  width: 22px;
  height: 22px;
  border-radius: 999px;
  border: 2.5px solid var(--border);
  background: transparent;
  margin: 0;
  position: absolute;
  inset: 0;
  cursor: pointer;
  transition: all 200ms ease;
}

.todo__checkIcon {
  display: none;
  font-size: 15px;
  font-weight: 700;
  line-height: 1;
  color: var(--p3);
  position: relative;
  z-index: 1;
  transition: transform 200ms cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.todo__check:checked + .todo__checkIcon {
  display: block;
  animation: checkBounce 400ms cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes checkBounce {
  0% { transform: scale(0); }
  50% { transform: scale(1.3); }
  100% { transform: scale(1); }
}

.todo__check:checked {
  background: var(--ok);
  border-color: var(--ok);
  box-shadow: 0 0 10px rgba(34, 197, 94, 0.4);
}

.todo__check:checked + .todo__checkIcon {
  color: white;
}

.todo[data-priority='URGENT'] .todo__check { border-color: var(--pUrgent); }
.todo[data-priority='P0'] .todo__check { border-color: var(--p0); }
.todo[data-priority='P1'] .todo__check { border-color: var(--p1); }
.todo[data-priority='P2'] .todo__check { border-color: var(--p2); }
.todo[data-priority='P3'] .todo__check { border-color: var(--p3); }

.todo[data-priority='URGENT'] .todo__checkIcon { color: white; }
.todo[data-priority='P0'] .todo__checkIcon { color: white; }
.todo[data-priority='P1'] .todo__checkIcon { color: white; }
.todo[data-priority='P2'] .todo__checkIcon { color: white; }
.todo[data-priority='P3'] .todo__checkIcon { color: white; }

@keyframes urgentFlash {
  0%, 100% { border-color: #ff0000; box-shadow: 0 0 8px rgba(255, 0, 0, 0.6); }
  50% { border-color: #ffff00; box-shadow: 0 0 8px rgba(255, 255, 0, 0.6); }
}

.todo[data-priority='URGENT'] {
  animation: urgentFlash 1s infinite alternate;
  border-width: 2px;
}

/* Stop flashing once completed/archived */
.todo[data-completed='true'],
.todo--completed-item {
  animation: none !important;
  border-width: 1px;
  box-shadow: none;
}

.todo__check:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

.todo__check[disabled] {
  opacity: 0.55;
}

.todo__menuBtn {
  padding: 0;
  min-width: 24px;
  min-height: 24px;
  font-size: 22px;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transform: translateY(-1px);
  background: none !important;
  border: none !important;
  color: var(--muted);
  vertical-align: middle;
}

.todo--dragging {
  position: fixed !important;
  z-index: 120;
  box-shadow: 0 10px 30px rgba(0,0,0,0.35);
  pointer-events: none;
  touch-action: none;
  margin: 0 !important;
  transform: none !important;
  transition: none !important;
}

/* Project card specific drag overrides */
.projectCard.todo--dragging {
  position: fixed !important;
  z-index: 120;
  margin: 0 !important;
  transform: none !important;
  transition: none !important;
}

.todo--placeholder {
  border-style: dashed;
  opacity: 0.6;
}

/* Ensure parent containers don't create a transformed stacking context that shifts drag positioning */
.stack,
.list {
  transform: none !important;
}

/* During drag reordering, prevent the app scroller from stealing the gesture */
body.dragging-reorder .app {
  overflow: hidden !important;
  -webkit-overflow-scrolling: auto;
}

/* A project placeholder should not look like a real card */
.projectCard.todo--placeholder {
  background: transparent !important;
  pointer-events: none;
}

.todo__title--done { text-decoration: line-through; opacity: 0.7; }

.todo__titleArea {
  flex: 1;
  min-width: 0;
  max-width: 100%;
  overflow: hidden;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
}

/* Completed section divider */
.todo-divider {
  display: flex;
  align-items: center;
  gap: 12px;
  margin: 16px 0 10px;
  padding: 0 4px;
}

.todo-divider::before,
.todo-divider::after {
  content: '';
  flex: 1;
  height: 1px;
  background: linear-gradient(90deg, transparent 0%, var(--border) 50%, transparent 100%);
}

.todo-divider__text {
  font-size: 13px;
  font-weight: 700;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  cursor: pointer;
  padding: 6px 14px;
  border-radius: 999px;
  background: linear-gradient(135deg, var(--surface2) 0%, var(--surface) 100%);
  border: 1px solid var(--border);
  transition: all 200ms ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}
.todo-divider__text:active { 
  background: var(--surface3); 
  transform: scale(0.97);
}

/* Suggestion dropdown for checklist quick-add */
.suggestion-dropdown {
  position: absolute;
  left: 0;
  right: 0;
  top: 100%;
  margin-top: 4px;
  list-style: none;
  padding: 6px 0;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 10px;
  box-shadow: var(--card-shadow);
  z-index: 20;
}

.suggestion-item {
  padding: 8px 12px;
  cursor: pointer;
  color: var(--text);
  font-size: 15px;
}

.suggestion-item:hover,
.suggestion-item:active {
  background: var(--surface2);
}

/* Collapsed completed stack */
.completedStack {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 3px;
  padding: 8px 0;
  opacity: 0.7;
}

.completedStack__line {
  width: 100px;
  height: 3px;
  border-radius: 2px;
  background: linear-gradient(90deg, var(--ok) 0%, var(--accent) 100%);
  box-shadow: 0 0 6px rgba(34, 197, 94, 0.3);
}

/* Days left tags */
.dueTag {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 600;
  background: rgba(148,163,184,0.15);
  color: var(--muted);
}

@keyframes flashOpacity {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.1; }
}

.dueTag--overdue {
  background: rgba(239,68,68,0.15);
  color: var(--p0);
  animation: flashOpacity 2s ease-in-out infinite;
}

.dueTag--today {
  background: rgba(249,115,22,0.15);
  color: var(--p1);
  animation: flashOpacity 2s ease-in-out infinite;
}

.dueTag--soon {
  background: rgba(234,179,8,0.15);
  color: var(--p2);
  animation: flashOpacity 2s ease-in-out infinite;
}

/* Hide/stop blinking once completed */
.todo[data-completed='true'] .dueTag,
.todo--completed-item .dueTag {
  display: none !important;
  animation: none !important;
}

/* Todo info page styles */
.todoInfo__title {
  font-size: 18px;
  font-weight: 700;
  line-height: 1.3;
}

.todoInfo__row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  padding: 8px 0;
}

.todoInfo__label {
  font-size: 15px;
  color: var(--muted);
  font-weight: 600;
}

.todoInfo__value {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
}

.todoInfo__section {
  padding: 10px 0;
}

.todoInfo__notes {
  margin-top: 6px;
  padding: 4px 0;
  background: transparent;
  border: none;
  border-radius: 0;
  font-size: 14px;
  line-height: 1.5;
  white-space: pre-wrap;
  word-break: break-word;
}

.badge {
  display: inline-flex;
  align-items: center;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 13px;
  font-weight: 700;
  background: var(--surface2);
  border: 1px solid var(--border);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}
.badge--pUrgent { color: var(--pUrgent); background: rgba(255, 0, 0, 0.1); border-color: var(--pUrgent); animation: urgentFlash 1s infinite alternate; }
.badge--p0 { color: var(--p0); background: rgba(239, 68, 68, 0.1); border-color: rgba(239, 68, 68, 0.3); }
.badge--p1 { color: var(--p1); background: rgba(249, 115, 22, 0.1); border-color: rgba(249, 115, 22, 0.3); }
.badge--p2 { color: var(--p2); background: rgba(234, 179, 8, 0.1); border-color: rgba(234, 179, 8, 0.3); }
.badge--p3 { color: var(--p3); background: rgba(34, 197, 94, 0.1); border-color: rgba(34, 197, 94, 0.3); }

.iconBtn {
  min-width: var(--tap);
  min-height: var(--tap);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: rgba(17,28,51,0.6);
  color: var(--text);
}
.iconBtn:focus-visible { outline: 2px solid #93c5fd; outline-offset: 2px; }

.tabbar {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 10;
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 6px;
  padding: 2px 12px calc(2px + var(--safe-bottom));
  background: var(--tabbar-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-top: 1px solid var(--border);
  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.15);
}

html[data-theme='light'] .tabbar {
  box-shadow: 0 -2px 15px rgba(99, 102, 241, 0.06);
}

.tabbar__tab {
  min-height: 24px;
  padding: 4px 0;
  border: 0;
  border-radius: 12px;
  background: transparent;
  color: var(--muted);
  font-weight: 600;
  font-size: 13px;
  transition: all 200ms ease;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: translateY(6px);
}

.tabbar__tab[aria-current="page"] {
  color: white;
  background: linear-gradient(135deg, var(--accent) 0%, var(--accent2) 100%);
  box-shadow: 0 2px 12px var(--glow);
  font-weight: 700;
}

html[data-theme='light'] .tabbar__tab[aria-current="page"] {
  box-shadow: 0 2px 15px rgba(99, 102, 241, 0.25);
}

.tabbar__tab:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }

.tabbar__label {
  margin: 0;
}

.modalHost {
  position: fixed;
  inset: 0;
  display: none;
  padding: calc(12px + var(--safe-top)) 12px calc(12px + var(--safe-bottom));
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  z-index: 200;
  animation: modalFadeIn 200ms ease;
}

html[data-theme='light'] .modalHost {
  background: rgba(100, 116, 139, 0.3);
}

.modalHost[aria-hidden="false"] { display: grid; align-items: end; justify-items: center; }
.modalHost[data-align="top"] { align-items: start; }
.modalHost[data-align="center"] { align-items: center; }

@keyframes modalFadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes modalSlideUp {
  from { transform: translateY(30px) scale(0.97); opacity: 0; }
  to { transform: translateY(0) scale(1); opacity: 1; }
}

@keyframes modalSlideDown {
  from { transform: translateY(-30px) scale(0.97); opacity: 0; }
  to { transform: translateY(0) scale(1); opacity: 1; }
}

.modal {
  background: var(--modal-bg);
  border: 1px solid var(--border);
  border-radius: 24px;
  padding: 16px;
  max-height: min(82vh, 720px);
  width: 100%;
  max-width: 100%;
  overflow-y: auto;
  overscroll-behavior-y: contain;
  scrollbar-width: none;
  animation: modalSlideUp 300ms cubic-bezier(0.16, 1, 0.3, 1);
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5), 0 0 60px var(--glow);
}

html[data-theme='light'] .modal {
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15), 0 0 40px rgba(99, 102, 241, 0.08);
}

.modalHost[data-align="top"] .modal {
  animation: modalSlideDown 300ms cubic-bezier(0.16, 1, 0.3, 1);
}
.modal::-webkit-scrollbar { display: none; }

.modal__header { display: flex; justify-content: space-between; align-items: center; gap: 12px; margin-bottom: 12px; }
.modal__header .iconBtn { background: transparent; border: none; font-size: 24px; min-width: auto; min-height: auto; border-radius: 0; color: var(--muted); transition: color 150ms ease; }
.modal__header .iconBtn:hover { color: var(--text); }
.modal__title { 
  font-weight: 750; 
  font-size: 17px;
  background: linear-gradient(135deg, var(--text) 0%, var(--accent) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.thumbGrid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
.thumb {
  position: relative;
  border-radius: 14px;
  overflow: hidden;
  border: 1px solid var(--border);
  background: var(--field);
}
.thumb img { width: 100%; height: 100%; aspect-ratio: 1 / 1; object-fit: cover; display: block; }
.thumb--clickable { cursor: pointer; }
.thumb--clickable:active { opacity: 0.8; }
.thumb__removeBtn {
  position: absolute;
  top: 8px;
  right: 8px;
  min-width: 30px;
  min-height: 30px;
  border-radius: 999px;
  border: none;
  background: rgba(0, 0, 0, 0.5);
  color: #fff;
  font-weight: 800;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 6px rgba(0,0,0,0.25);
}
.thumb__removeBtn:active { transform: scale(0.94); opacity: 0.9; }

.small { font-size: 14px; color: var(--muted); }
.hr { height: 1px; background: var(--border); margin: 12px 0; }

/* Empty state */
.emptyState {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 80px 20px;
  text-align: center;
  gap: 16px;
}

.emptyState__icon {
  font-size: 64px;
  opacity: 0.8;
  line-height: 1;
  filter: drop-shadow(0 4px 12px var(--glow));
}

.emptyState__title {
  font-size: 20px;
  font-weight: 700;
  background: linear-gradient(135deg, var(--text) 0%, var(--accent) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.emptyState__message {
  font-size: 15px;
  color: var(--muted);
  line-height: 1.6;
  max-width: 320px;
}

/* Toast notifications */
.toastContainer {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 30;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  pointer-events: none;
  max-width: 90%;
}

.toast {
  background: var(--surface);
  color: var(--text);
  padding: 12px 20px;
  border-radius: 12px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px var(--border);
  font-size: 15px;
  font-weight: 600;
  text-align: center;
  opacity: 0;
  transform: translateY(20px) scale(0.95);
  transition: opacity 250ms ease, transform 250ms cubic-bezier(0.16, 1, 0.3, 1);
  pointer-events: auto;
  max-width: 400px;
}

.toast--show {
  opacity: 1;
  transform: translateY(0) scale(1);
}

.toast--hide {
  opacity: 0;
  transform: translateY(10px) scale(0.98);
}

.toast--success {
  background: linear-gradient(135deg, var(--accent) 0%, var(--accent2) 100%);
  color: white;
  box-shadow: 0 8px 24px var(--glow), 0 0 0 1px rgba(255, 255, 255, 0.1);
}

html[data-theme='light'] .toast {
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15), 0 0 0 1px var(--border);
}

html[data-theme='light'] .toast--success {
  box-shadow: 0 8px 24px rgba(99, 102, 241, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.3);
}

/* Loading state */
.loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 80px 20px;
  gap: 16px;
}

.loading__spinner {
  width: 40px;
  height: 40px;
  border: 3px solid var(--border);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin 800ms linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.loading__text {
  font-size: 14px;
  color: var(--muted);
}

/* Full-screen image viewer */
.imageViewer {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100vw;
  height: 100vh;
  z-index: 9999;
  background: #000;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.imageViewer__close {
  position: fixed;
  top: calc(12px + var(--safe-top));
  right: 12px;
  width: 44px;
  height: 44px;
  border-radius: 999px;
  border: none;
  background: transparent;
  color: #fff;
  font-size: 24px;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
}

.imageViewer__counter {
  position: fixed;
  top: calc(12px + var(--safe-top));
  left: 50%;
  transform: translateX(-50%);
  padding: 6px 14px;
  border-radius: 999px;
  background: rgba(0,0,0,0.6);
  color: #fff;
  font-size: 14px;
  font-weight: 500;
  z-index: 10000;
}

.imageViewer__img {
  max-width: 100vw;
  max-height: 100vh;
  width: auto;
  height: auto;
  object-fit: contain;
  transform-origin: center center;
  touch-action: none;
  -webkit-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
}

.icon-protected {
  font-size: 16px;
  line-height: 1;
  vertical-align: middle;
  margin-left: 6px;
  opacity: 0.7;
  cursor: default;
  background: none; /* Remove any background */
}



/* Focus Mode (Zen) */
body.focus-mode .tabbar {
  display: none !important;
}

/* Keep topbar mounted so the focus toggle remains accessible */
body.focus-mode .topbar {
  display: flex !important;
}

body.focus-mode .main {
  padding-top: calc(env(safe-area-inset-top) + 16px);
  padding-bottom: calc(env(safe-area-inset-bottom) + 16px);
}

.focus-exit-btn {
  display: none;
  position: fixed;
  bottom: 24px;
  right: 24px;
  z-index: 1000;
  background: var(--primary);
  color: white;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  font-size: 24px;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

body.focus-mode .focus-exit-btn {
  display: flex;
}


.subProjects {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: 12px;
  margin-bottom: 24px;
  padding-bottom: 16px;
  border-bottom: 1px dashed var(--border);
}


.focus-toggle-btn {
  background: transparent;
  border: none;
  font-size: 1.2rem;
  margin-right: 8px;
  z-index: 2000;
  cursor: pointer;
  padding: 8px;
  border-radius: 8px;
  color: var(--text);
  transition: opacity 0.2s;
}

body.focus-mode .topbar {
  background: transparent;
  border: none;
  pointer-events: auto;
}

body.focus-mode .topbar > * {
  opacity: 0;
  pointer-events: none;
}

body.focus-mode .topbar .topbar__actions {
  opacity: 1;
  pointer-events: auto;
}

body.focus-mode .topbar__actions > *:not(.focus-toggle-btn) {
  opacity: 0;
  pointer-events: none;
}

body.focus-mode .focus-toggle-btn {
  opacity: 1;
  pointer-events: auto;
}


html, body {
  scroll-behavior: auto !important;
}

/* Improved Focus Mode Logic */
body.focus-mode .topbar {
  background: transparent !important;
  border-bottom: none !important;
  box-shadow: none !important;
  pointer-events: auto;
}

body.focus-mode .topbar__title, 
body.focus-mode .topbar__menuBtn,
body.focus-mode .topbar__backBtn,
body.focus-mode .topbar__addBtn {
  opacity: 0 !important;
  pointer-events: none !important;
  visibility: hidden; /* Ensure they don't block clicks if opacity fails */
}

body.focus-mode .topbar__actions {
  visibility: visible; 
  pointer-events: auto;
}

body.focus-mode .focus-toggle-btn {
  visibility: visible;
  opacity: 1 !important;
  pointer-events: auto !important;
  background: transparent;
  color: var(--text);
  border: none;
  box-shadow: none;
  /* Ensure it sits on top of scrolling content */
  position: relative; 
  z-index: 5000;
}

/* ───────────────────────────────────────────────────────────────────────────
   VOICE RECORDER
   ─────────────────────────────────────────────────────────────────────────── */

.voiceRecorder {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 24px 16px;
  gap: 16px;
}

.voiceRecorder__waveform {
  width: 100%;
  height: 60px;
  border-radius: 8px;
  background: var(--field);
}

.voiceRecorder__timer {
  font-size: 2.5rem;
  font-weight: 600;
  font-variant-numeric: tabular-nums;
  color: var(--text);
}

.voiceRecorder__status {
  font-size: 0.875rem;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.voiceRecorder__status--recording {
  color: var(--danger);
  animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.voiceRecorder__controls {
  display: flex;
  gap: 16px;
  margin-top: 8px;
}

.voiceRecorder__btn {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  border: none;
  font-size: 24px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.15s ease, background 0.15s ease;
}

.voiceRecorder__btn:active {
  transform: scale(0.92);
}

.voiceRecorder__btn--record {
  background: var(--danger);
  color: #fff;
  font-size: 32px;
  box-shadow: 0 4px 20px rgba(239, 68, 68, 0.4);
}

.voiceRecorder__btn--pause {
  background: var(--accent);
  color: #fff;
}

.voiceRecorder__btn--stop {
  background: var(--surface3);
  color: var(--text);
}

/* ───────────────────────────────────────────────────────────────────────────
   VOICE PLAYER
   ─────────────────────────────────────────────────────────────────────────── */

.voicePlayer {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 16px 8px;
  gap: 12px;
}

.voicePlayer__title {
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--text);
  text-align: center;
}

.voicePlayer__meta {
  font-size: 0.8125rem;
  color: var(--muted);
}

.voicePlayer__progressWrap {
  width: 100%;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 0 8px;
}

.voicePlayer__time {
  font-size: 0.75rem;
  font-variant-numeric: tabular-nums;
  color: var(--muted);
  min-width: 36px;
}

.voicePlayer__progressBar {
  flex: 1;
  height: 6px;
  background: var(--surface3);
  border-radius: 3px;
  cursor: pointer;
  overflow: hidden;
}

.voicePlayer__progressFill {
  height: 100%;
  width: 0;
  background: var(--accent);
  border-radius: 3px;
  transition: width 0.1s linear;
}

.voicePlayer__controls {
  display: flex;
  gap: 16px;
  margin-top: 8px;
}

.voicePlayer__btn {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  border: none;
  font-size: 20px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--surface3);
  color: var(--text);
  transition: transform 0.15s ease, background 0.15s ease;
}

.voicePlayer__btn:active {
  transform: scale(0.92);
}

.voicePlayer__btn--play {
  background: var(--accent);
  color: #fff;
  width: 64px;
  height: 64px;
  font-size: 24px;
}

/* ───────────────────────────────────────────────────────────────────────────
   VOICE MEMO CARD
   ─────────────────────────────────────────────────────────────────────────── */

.voiceMemoList {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.voiceMemoCard {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 16px;
  background: var(--surface);
  border-radius: var(--radius);
  box-shadow: var(--card-shadow);
  cursor: pointer;
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.voiceMemoCard:active {
  transform: scale(0.98);
}

.voiceMemoCard__icon {
  font-size: 1.5rem;
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--surface3);
  border-radius: 50%;
  flex-shrink: 0;
}

.voiceMemoCard__content {
  flex: 1;
  min-width: 0;
}

.voiceMemoCard__title {
  font-size: 1rem;
  font-weight: 500;
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.voiceMemoCard__meta {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 0.8125rem;
  color: var(--muted);
  margin-top: 2px;
}

.voiceMemoCard__dot {
  font-size: 0.625rem;
}

.voiceMemoCard__link {
  font-size: 1rem;
  flex-shrink: 0;
}

.voiceMemoCard__menuBtn {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  color: var(--muted);
  font-size: 1.25rem;
  border-radius: 50%;
  cursor: pointer;
  flex-shrink: 0;
  transition: background 0.15s ease;
}

.voiceMemoCard__menuBtn:active {
  background: var(--surface3);
}

/* Voice memo section heading */
.voiceMemoSection {
  margin-top: 24px;
}

.voiceMemoSection__title {
  font-size: 0.8125rem;
  font-weight: 600;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 12px;
  padding: 0 4px;
}

.suggestion-history {
  gap: 0.75rem;
}

.suggestion-history-list {
  max-height: 240px;
  overflow-y: auto;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: var(--surface2);
  padding: 6px;
}

.suggestion-history-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 5px 10px;
  border-radius: 10px;
  background: var(--surface3);
  margin-bottom: 6px;
}

.suggestion-history-item:last-child {
  margin-bottom: 0;
}

.suggestion-history-text {
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.suggestion-history-empty {
  text-align: center;
  color: var(--muted);
  padding: 14px 6px;
}

.suggestion-history-delete {
  white-space: nowrap;
}
